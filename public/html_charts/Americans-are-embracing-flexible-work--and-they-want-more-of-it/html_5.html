<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Remote Work Intensity by Educational Attainment</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f9f9f9;
        }
        
        .visualization-container {
            width: 750px;
            height: 500px;
            background-color: white;
            padding: 20px;
            position: relative;
        }
        
        .title {
            font-size: 18pt;
            font-weight: bold;
            margin-bottom: 5px;
            text-align: left;
        }
        
        .subtitle {
            font-size: 14pt;
            color: #555;
            margin-bottom: 30px;
            text-align: left;
        }
        
        .source {
            font-size: 10pt;
            color: #999;
            margin-top: 20px;
            text-align: left;
        }
        
        .axis-label {
            font-size: 14pt;
        }
        
        .bar-value {
            font-size: 14pt;
            font-weight: bold;
        }
        
        .callout-box {
            background-color: #f5f5f5;
            border-radius: 5px;
            padding: 12px;
            width: 280px;
            font-size: 12pt;
            color: #333;
            position: absolute;
            right: 40px;
            top: 100px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border: 1px solid #e0e0e0;
            line-height: 1.4;
        }
        
        .highlight {
            font-family: 'Georgia', serif;
            font-size: 14pt;
            color: #003366;
            font-weight: bold;
        }

        #chart {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="visualization-container">
        <div class="title">Remote Work Intensity by Educational Attainment (2023)</div>
        <div class="subtitle">Percentage of workdays performed remotely, by highest education level</div>
        <div id="chart"></div>
        <div class="source">Source: WFH Research Survey of Working Arrangements and Attitudes (SWAA), mid-2023</div>
        <div class="callout-box">
            Workers with graduate degrees spend <span class='highlight'>80%</span> more time working remotely than those with only a high school diploma
        </div>
    </div>

    <script>
        // Data
        const data = [
            { category: "Graduate Degree", value: 36, opacity: 1.0 },
            { category: "Bachelor's Degree", value: 34, opacity: 0.85 },
            { category: "Some College", value: 26, opacity: 0.7 },
            { category: "High School or Less", value: 20, opacity: 0.55 }
        ];

        // Set up dimensions
        const margin = { top: 20, right: 120, bottom: 50, left: 180 };
        const width = 750 - margin.left - margin.right;
        const height = 320 - margin.top - margin.bottom;
        
        // Create SVG
        const svg = d3.select("#chart")
            .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform", `translate(${margin.left}, ${margin.top})`);
            
        // Create scales
        const xScale = d3.scaleLinear()
            .domain([0, 40])
            .range([0, width]);
            
        const yScale = d3.scaleBand()
            .domain(data.map(d => d.category))
            .range([0, height])
            .padding(0.35);
            
        // Add X axis
        svg.append("g")
            .attr("transform", `translate(0, ${height})`)
            .call(d3.axisBottom(xScale)
                .tickFormat(d => d + "%")
                .tickSize(0)
                .tickPadding(12))
            .call(g => g.select(".domain").remove())
            .selectAll("text")
            .style("font-size", "12pt");
            
        // Add Y axis
        svg.append("g")
            .call(d3.axisLeft(yScale)
                .tickSize(0)
                .tickPadding(10))
            .call(g => g.select(".domain").remove())
            .selectAll("text")
            .attr("class", "axis-label")
            .style("font-size", "14pt");
            
        // Add gridlines
        svg.append("g")
            .attr("class", "grid")
            .selectAll("line")
            .data([0, 10, 20, 30, 40])
            .enter()
            .append("line")
            .attr("x1", d => xScale(d))
            .attr("x2", d => xScale(d))
            .attr("y1", 0)
            .attr("y2", height)
            .attr("stroke", "#e0e0e0")
            .attr("stroke-width", 1);
            
        // Add bars
        svg.selectAll(".bar")
            .data(data)
            .enter()
            .append("rect")
            .attr("class", "bar")
            .attr("y", d => yScale(d.category))
            .attr("height", yScale.bandwidth())
            .attr("x", 0)
            .attr("width", d => xScale(d.value))
            .attr("fill", d => d3.color("#003366").copy({opacity: d.opacity}))
            .attr("rx", 3)
            .attr("ry", 3);
            
        // Add values at end of bars
        svg.selectAll(".bar-value")
            .data(data)
            .enter()
            .append("text")
            .attr("class", "bar-value")
            .attr("x", d => xScale(d.value) + 10)  // Increased padding
            .attr("y", d => yScale(d.category) + yScale.bandwidth() / 2 + 5)
            .text(d => d.value + "%");
    </script>
</body>
</html>