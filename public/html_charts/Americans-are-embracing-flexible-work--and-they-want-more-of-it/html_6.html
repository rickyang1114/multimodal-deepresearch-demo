<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Remote Work Intensity by Industry (2024)</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px 0;
        }
        
        .visualization-container {
            width: 850px;
            height: 650px;
            background-color: white;
            padding: 20px;
        }
        
        .title {
            font-size: 18pt;
            font-weight: bold;
            text-align: center;
            margin-bottom: 5px;
            margin-top: 10px;
        }
        
        .subtitle {
            font-size: 14pt;
            text-align: center;
            margin-bottom: 40px;
        }
        
        .source {
            font-size: 10pt;
            color: #999;
            text-align: left;
            margin-top: 10px;
        }
        
        .axis-label {
            font-size: 14pt;
        }
        
        .bar-value {
            font-size: 14pt;
            font-weight: bold;
        }
        
        .key-number {
            font-family: 'Georgia', serif;
            font-size: 16pt;
            font-weight: bold;
        }
        
        .legend-container {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin-right: 10px;
            font-size: 12pt;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            margin-right: 5px;
            border-radius: 2px;
        }
    </style>
</head>
<body>
    <div class="visualization-container">
        <div class="title">Remote Work Intensity by Industry (2024)</div>
        <div class="subtitle">Average number of days per week working from home</div>
        <div id="chart"></div>
        <div id="legend" class="legend-container"></div>
        <div class="source">Source: Zoetalent Solutions, 2024</div>
    </div>

    <script>
        // Data preparation
        const data = [
            { industry: "Computer & IT", days: 2.28, group: "High Remote Intensity" },
            { industry: "Finance & Insurance", days: 2.23, group: "High Remote Intensity" },
            { industry: "Professional & Business Services", days: 2.05, group: "High Remote Intensity" },
            { industry: "Information", days: 1.95, group: "Medium Remote Intensity" },
            { industry: "Manufacturing", days: 0.88, group: "Low Remote Intensity" },
            { industry: "Retail Trade", days: 0.73, group: "Low Remote Intensity" },
            { industry: "Transportation & Warehousing", days: 0.72, group: "Low Remote Intensity" }
        ];
        
        // Sort data in descending order of days
        data.sort((a, b) => b.days - a.days);
        
        // Color mapping
        const colorScale = d3.scaleOrdinal()
            .domain(["High Remote Intensity", "Medium Remote Intensity", "Low Remote Intensity"])
            .range(["#003366", "#008080", "#708090"]);
        
        // Set up dimensions - increased left margin to accommodate full industry names
        const margin = { top: 20, right: 80, bottom: 60, left: 300 };
        const width = 850 - margin.left - margin.right;
        const height = 450 - margin.top - margin.bottom;
        
        // Create SVG
        const svg = d3.select("#chart")
            .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform", `translate(${margin.left}, ${margin.top})`);
        
        // Set up scales
        const xScale = d3.scaleLinear()
            .domain([0, 2.5])
            .range([0, width]);
        
        const yScale = d3.scaleBand()
            .domain(data.map(d => d.industry))
            .range([0, height])
            .padding(0.3);
        
        // Add X axis
        svg.append("g")
            .attr("transform", `translate(0, ${height})`)
            .call(d3.axisBottom(xScale)
                .ticks(6)
                .tickFormat(d => d.toFixed(1))
            )
            .style("font-size", "12pt");
        
        // Add X axis label
        svg.append("text")
            .attr("class", "axis-label")
            .attr("x", width / 2)
            .attr("y", height + 40)
            .style("text-anchor", "middle")
            .text("Days per week working from home");
        
        // Add Y axis
        svg.append("g")
            .call(d3.axisLeft(yScale))
            .style("font-size", "14pt");
        
        // Add gridlines
        svg.append("g")
            .attr("class", "grid")
            .selectAll("line")
            .data(xScale.ticks(6))
            .enter()
            .append("line")
            .attr("x1", d => xScale(d))
            .attr("x2", d => xScale(d))
            .attr("y1", 0)
            .attr("y2", height)
            .attr("stroke", "#e0e0e0")
            .attr("stroke-width", 1);
        
        // Add bars
        svg.selectAll(".bar")
            .data(data)
            .enter()
            .append("rect")
            .attr("class", "bar")
            .attr("y", d => yScale(d.industry))
            .attr("height", yScale.bandwidth())
            .attr("x", 0)
            .attr("width", d => xScale(d.days))
            .attr("fill", d => colorScale(d.group))
            .attr("rx", 3)
            .attr("ry", 3);
        
        // Add bar values
        svg.selectAll(".bar-value")
            .data(data)
            .enter()
            .append("text")
            .attr("class", d => d.days > 2 ? "bar-value key-number" : "bar-value")
            .attr("x", d => xScale(d.days) + 10)
            .attr("y", d => yScale(d.industry) + yScale.bandwidth() / 2 + 5)
            .text(d => d.days.toFixed(2));
        
        // Create separate legend div with proper spacing
        const legendData = [
            { group: "High Remote Intensity", description: "> 2 days/week" },
            { group: "Medium Remote Intensity", description: "1-2 days/week" },
            { group: "Low Remote Intensity", description: "< 1 day/week" }
        ];
        
        // Create legend in separate div
        const legendContainer = d3.select("#legend");
        
        const legendItems = legendContainer.selectAll(".legend-item")
            .data(legendData)
            .enter()
            .append("div")
            .attr("class", "legend-item");
        
        legendItems.append("div")
            .attr("class", "legend-color")
            .style("background-color", d => colorScale(d.group));
        
        legendItems.append("div")
            .text(d => `${d.group} (${d.description})`);
    </script>
</body>
</html>