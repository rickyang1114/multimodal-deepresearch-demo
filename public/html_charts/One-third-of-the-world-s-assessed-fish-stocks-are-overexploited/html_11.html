<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Strategic Roadmap for Sustainable Fisheries</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      body {
        font-family: 'Arial', sans-serif;
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        background-color: #f9f9f9;
      }

      #visualization {
        width: 800px;
        height: 650px;
        background-color: white;
        position: relative;
        padding: 20px;
        box-sizing: border-box;
      }

      .title {
        font-size: 18px;
        font-weight: bold;
        color: #2a3045;
        text-align: center;
        margin-bottom: 25px;
      }

      .pillars-container {
        display: flex;
        justify-content: space-between;
        height: 380px;
        margin-bottom: 20px;
      }

      .pillar {
        width: 170px;
        position: relative;
      }

      .pillar-header {
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 4px 4px 0 0;
        margin-bottom: 15px;
      }

      .pillar-title {
        color: white;
        font-size: 14px;
        font-weight: bold;
        text-align: center;
        padding: 0 5px;
      }

      .action-item {
        height: 90px;
        margin-bottom: 15px;
        border-radius: 4px;
        padding: 10px;
        position: relative;
        background-color: white;
        box-sizing: border-box;
      }

      .action-text {
        font-size: 10px;
        color: #444;
        margin-left: 25px;
        line-height: 1.4;
      }

      .action-icon {
        position: absolute;
        top: 10px;
        left: 10px;
        font-size: 16px;
      }

      .timeline-section {
        position: relative;
        height: 150px;
        margin-top: 30px;
      }

      .kpi-container {
        display: flex;
        justify-content: space-between;
        margin-bottom: 30px;
      }

      .kpi-box {
        width: 170px;
        height: 60px;
        background-color: #f5f5f5;
        border: 1px solid #7d8ca3;
        border-radius: 4px;
        padding: 10px;
        box-sizing: border-box;
        display: flex;
        align-items: center;
      }

      .kpi-text {
        font-size: 10px;
        color: #444;
        line-height: 1.4;
      }

      .kpi-value {
        font-weight: bold;
      }

      .kpi-number {
        font-family: 'Georgia', serif;
        font-size: 12px;
        color: #2a3045;
      }

      .timeline-container {
        position: relative;
        height: 60px;
      }

      .timeline-arrow {
        position: absolute;
        top: 20px;
        left: 0;
        right: 0;
        height: 2px;
        background-color: #2a3045;
      }

      .timeline-arrow:after {
        content: '';
        position: absolute;
        right: -10px;
        top: -4px;
        width: 0;
        height: 0;
        border-left: 10px solid #2a3045;
        border-top: 5px solid transparent;
        border-bottom: 5px solid transparent;
      }

      .timeline-phase-marker {
        position: absolute;
        top: 15px;
        width: 2px;
        height: 12px;
        background-color: #2a3045;
      }

      .year-marker {
        position: absolute;
        top: 30px;
        font-size: 12px;
        color: #2a3045;
        font-weight: bold;
        transform: translateX(-50%);
      }

      .timeline-phase {
        position: absolute;
        top: -5px;
        font-size: 11px;
        color: #2a3045;
        font-weight: 500;
        text-align: center;
        width: 30%;
        transform: translateX(-50%);
      }

      .connection-line {
        position: absolute;
        width: 1px;
        background-color: #ccc;
        z-index: -1;
      }

      .source {
        position: absolute;
        bottom: 20px;
        left: 0;
        right: 0;
        text-align: center;
        font-size: 8px;
        color: #7d8ca3;
      }

      /* Pillar specific colors */
      .pillar-1 .pillar-header {
        background-color: #4abdac;
      }
      .pillar-1 .action-item {
        border: 1px solid #4abdac;
      }
      .pillar-1 .action-icon {
        color: #4abdac;
      }

      .pillar-2 .pillar-header {
        background-color: #2a3045;
      }
      .pillar-2 .action-item {
        border: 1px solid #2a3045;
      }
      .pillar-2 .action-icon {
        color: #2a3045;
      }

      .pillar-3 .pillar-header {
        background-color: #7d8ca3;
      }
      .pillar-3 .action-item {
        border: 1px solid #7d8ca3;
      }
      .pillar-3 .action-icon {
        color: #7d8ca3;
      }

      .pillar-4 .pillar-header {
        background-color: #fc4a1a;
      }
      .pillar-4 .action-item {
        border: 1px solid #fc4a1a;
      }
      .pillar-4 .action-icon {
        color: #fc4a1a;
      }
    </style>
  </head>
  <body>
    <div id="visualization"></div>

    <script>
      // Create the visualization
      const vis = d3.select('#visualization')

      // Add title
      vis
        .append('div')
        .attr('class', 'title')
        .text('Strategic Roadmap for Achieving 100% Sustainable Fisheries by 2030')

      // Create pillars container
      const pillarsContainer = vis.append('div').attr('class', 'pillars-container')

      // Pillar data
      const pillars = [
        {
          id: 1,
          title: 'Data & Assessment Capacity',
          color: '#4ABDAC',
          icon: 'fa-chart-line',
          actions: [
            "Implement FAO's three-tiered assessment framework globally",
            'Develop data collection partnerships in underassessed regions',
            'Invest in training and technology transfer for developing nations',
          ],
        },
        {
          id: 2,
          title: 'Policy & Economic Reform',
          color: '#2A3045',
          icon: 'fa-file-contract',
          actions: [
            'Accelerate ratification of WTO subsidy agreement',
            'Transition harmful subsidies to sustainable alternatives',
            'Implement full-cost accounting of fishing impacts',
          ],
        },
        {
          id: 3,
          title: 'Stakeholder Engagement',
          color: '#7D8CA3',
          icon: 'fa-users',
          actions: [
            'Establish co-management frameworks with fishing communities',
            'Develop market incentives for sustainable practices',
            'Create transparent decision-making processes',
          ],
        },
        {
          id: 4,
          title: 'Innovation & Technology',
          color: '#FC4A1A',
          icon: 'fa-gears',
          actions: [
            'Scale deployment of AI-enabled monitoring systems',
            'Refine harvest control rule algorithms',
            'Develop low-cost assessment tools for small-scale fisheries',
          ],
        },
      ]

      // Create pillars
      pillars.forEach((pillar, pillarIndex) => {
        const pillarDiv = pillarsContainer.append('div').attr('class', `pillar pillar-${pillar.id}`)

        // Pillar header
        pillarDiv
          .append('div')
          .attr('class', 'pillar-header')
          .append('div')
          .attr('class', 'pillar-title')
          .text(pillar.title)

        // Action items
        pillar.actions.forEach((action, actionIndex) => {
          const actionDiv = pillarDiv.append('div').attr('class', 'action-item')

          // Icon
          actionDiv.append('i').attr('class', `action-icon fas ${pillar.icon}`)

          // Action text with first few words bold
          const words = action.split(' ')
          const boldWords = words.slice(0, 2).join(' ')
          const restWords = words.slice(2).join(' ')

          const actionText = actionDiv.append('div').attr('class', 'action-text')

          actionText.append('span').style('font-weight', 'bold').text(boldWords)

          actionText.append('span').text(` ${restWords}`)

          // Create connection lines from action items to timeline
          // Calculate positions for connection lines
          const pillarWidth = 170
          const pillarSpacing = 20
          const pillarOffset = pillarIndex * (pillarWidth + pillarSpacing)
          const pillarCenter = pillarOffset + pillarWidth / 2

          const actionHeight = 90
          const actionSpacing = 15
          const actionTop =
            40 + 15 + actionIndex * (actionHeight + actionSpacing) + actionHeight / 2

          const timelineTop = 520 // Approximate position of timeline

          // Add connection line
          vis
            .append('div')
            .attr('class', 'connection-line')
            .style('left', `${pillarCenter}px`)
            .style('top', `${actionTop}px`)
            .style('height', `${timelineTop - actionTop}px`)
        })
      })

      // Timeline section
      const timelineSection = vis.append('div').attr('class', 'timeline-section')

      // KPI container
      const kpiContainer = timelineSection.append('div').attr('class', 'kpi-container')

      // KPI data
      const kpis = [
        "Percentage of global stocks with formal assessments: <span class='kpi-number'>25%</span> (2024) → <span class='kpi-number'>90%</span> (2030)",
        "Share of harmful subsidies eliminated: <span class='kpi-number'>10%</span> (2024) → <span class='kpi-number'>90%</span> (2030)",
        "Percentage of stocks with harvest control rules: <span class='kpi-number'>30%</span> (2024) → <span class='kpi-number'>95%</span> (2030)",
        "Share of overfished stocks with rebuilding plans: <span class='kpi-number'>20%</span> (2024) → <span class='kpi-number'>100%</span> (2030)",
      ]

      // Create KPI boxes
      kpis.forEach((kpi, i) => {
        kpiContainer
          .append('div')
          .attr('class', 'kpi-box')
          .style('width', '170px')
          .append('div')
          .attr('class', 'kpi-text')
          .html(kpi)
      })

      // Timeline container
      const timelineContainer = timelineSection.append('div').attr('class', 'timeline-container')

      // Timeline arrow
      timelineContainer.append('div').attr('class', 'timeline-arrow')

      // Year markers
      timelineContainer.append('div').attr('class', 'year-marker').style('left', '0%').text('2024')

      timelineContainer
        .append('div')
        .attr('class', 'year-marker')
        .style('left', '100%')
        .text('2030')

      // Timeline phases and markers
      const phases = [
        { label: '2024-2026:<br>Foundation Building', position: '16.67%' },
        { label: '2026-2028:<br>Scaling Implementation', position: '50%' },
        { label: '2028-2030:<br>Refinement & Integration', position: '83.33%' },
      ]

      // Add phase markers
      timelineContainer.append('div').attr('class', 'timeline-phase-marker').style('left', '33.33%')

      timelineContainer.append('div').attr('class', 'timeline-phase-marker').style('left', '66.67%')

      // Add phase labels
      phases.forEach((phase) => {
        timelineContainer
          .append('div')
          .attr('class', 'timeline-phase')
          .style('left', phase.position)
          .html(phase.label)
      })

      // Source attribution
      vis
        .append('div')
        .attr('class', 'source')
        .text(
          'Source: Synthesis of best practices from successful fisheries management case studies'
        )
    </script>
  </body>
</html>
