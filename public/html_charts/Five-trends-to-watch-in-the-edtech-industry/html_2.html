<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XR in Education: Market Growth and Adoption Barriers</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f9f9f9;
        }
        
        .visualization-container {
            width: 950px;
            height: 680px;
            background-color: white;
            padding: 20px;
            box-sizing: border-box;
        }
        
        .title {
            text-align: center;
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 25px;
            color: #333;
        }
        
        .panels-container {
            display: flex;
            height: 540px;
        }
        
        .panel {
            box-sizing: border-box;
        }
        
        .panel-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
            color: #333;
        }
        
        .panel-left {
            width: 48%;
            padding: 10px 20px 10px 10px;
            border-right: 1px solid #ddd;
        }
        
        .panel-right {
            width: 52%;
            padding: 10px 10px 10px 30px;
        }
        
        .market-growth, .engagement-metrics {
            margin-bottom: 25px;
        }
        
        .key-number {
            font-family: 'Georgia', serif;
            font-size: 18px;
            font-weight: bold;
            color: #0A3D62;
        }
        
        .cagr {
            font-family: 'Georgia', serif;
            font-size: 14px;
            font-weight: bold;
            color: #1E8F7A;
        }
        
        .footnote {
            font-size: 10px;
            color: #666;
            text-align: center;
            margin-top: 15px;
            font-style: italic;
        }
        
        .mitigation-strategy {
            background-color: rgba(30, 143, 122, 0.1);
            border: 1px solid #1E8F7A;
            border-radius: 8px;
            padding: 6px 10px;
            font-size: 11px;
            margin-top: 4px;
            color: #1E8F7A;
        }
        
        .barrier-label {
            font-size: 12px;
            font-weight: 500;
        }
        
        .barrier-stats {
            font-size: 10px;
            color: #555;
        }
        
        .multiplier {
            font-family: 'Georgia', serif;
            font-size: 15px;
            font-weight: bold;
            color: #1E8F7A;
        }
        
        .price-trend {
            color: #F08C00;
            font-weight: bold;
        }
        
        .engagement-label {
            font-size: 12px;
            text-anchor: end;
        }
    </style>
</head>
<body>
    <div class="visualization-container">
        <div class="title">XR in Education: Market Growth and Adoption Barriers</div>
        
        <div class="panels-container">
            <!-- Left Panel -->
            <div class="panel panel-left">
                <div class="panel-title">XR Market Expansion & Benefits</div>
                
                <div class="market-growth">
                    <div id="market-chart"></div>
                </div>
                
                <div class="engagement-metrics">
                    <div id="engagement-chart"></div>
                </div>
            </div>
            
            <!-- Right Panel -->
            <div class="panel panel-right">
                <div class="panel-title">Adoption Barriers & Mitigation Strategies</div>
                
                <div id="barriers-chart"></div>
            </div>
        </div>
        
        <div class="footnote">
            Sources: MarketsandMarkets, ImmersiveLearning.News, ScienceDirect, Avatar Academy (2023-2024)
        </div>
    </div>

    <script>
        // Market Growth Chart
        const marketData = [
            { year: 2023, value: 3.8 },
            { year: 2024, value: 5.6 },
            { year: 2025, value: 7.9 },
            { year: 2026, value: 10.3 },
            { year: 2027, value: 12.1 },
            { year: 2028, value: 14.2 }
        ];
        
        const marketWidth = 420;
        const marketHeight = 240;
        const marketMargin = { top: 40, right: 40, bottom: 40, left: 60 };
        
        const marketSvg = d3.select("#market-chart")
            .append("svg")
            .attr("width", marketWidth)
            .attr("height", marketHeight);
        
        const marketX = d3.scaleLinear()
            .domain([2023, 2028])
            .range([marketMargin.left, marketWidth - marketMargin.right]);
        
        const marketY = d3.scaleLinear()
            .domain([0, 16])
            .range([marketHeight - marketMargin.bottom, marketMargin.top]);
        
        // X-axis
        marketSvg.append("g")
            .attr("transform", `translate(0,${marketHeight - marketMargin.bottom})`)
            .call(d3.axisBottom(marketX).ticks(6).tickFormat(d3.format("d")));
        
        // Y-axis
        marketSvg.append("g")
            .attr("transform", `translate(${marketMargin.left},0)`)
            .call(d3.axisLeft(marketY).ticks(5).tickFormat(d => `$${d}B`));
        
        // Y-axis label
        marketSvg.append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 20)
            .attr("x", -marketHeight / 2)
            .attr("text-anchor", "middle")
            .style("font-size", "11px")
            .text("Market Size (Billions USD)");
        
        // Area under the line
        const area = d3.area()
            .x(d => marketX(d.year))
            .y0(marketHeight - marketMargin.bottom)
            .y1(d => marketY(d.value));
        
        marketSvg.append("path")
            .datum(marketData)
            .attr("fill", "rgba(10, 61, 98, 0.1)")
            .attr("d", area);
        
        // Line
        const line = d3.line()
            .x(d => marketX(d.year))
            .y(d => marketY(d.value));
        
        marketSvg.append("path")
            .datum(marketData)
            .attr("fill", "none")
            .attr("stroke", "#0A3D62")
            .attr("stroke-width", 2.5)
            .attr("d", line);
        
        // Data points
        marketSvg.selectAll(".data-point")
            .data(marketData)
            .enter()
            .append("circle")
            .attr("class", "data-point")
            .attr("cx", d => marketX(d.year))
            .attr("cy", d => marketY(d.value))
            .attr("r", 4)
            .attr("fill", "#0A3D62");
        
        // Data labels - with improved positioning to avoid overlap
        marketSvg.selectAll(".data-label")
            .data(marketData)
            .enter()
            .append("text")
            .attr("class", "data-label")
            .attr("x", (d, i) => {
                // Stagger labels to avoid overlap
                if (i === 0) return marketX(d.year) - 15;
                if (i === 1) return marketX(d.year) - 10;
                if (i === 2) return marketX(d.year) - 10;
                if (i === 3) return marketX(d.year) - 10;
                if (i === 4) return marketX(d.year) + 10;
                return marketX(d.year);
            })
            .attr("y", (d, i) => {
                // Adjust vertical position
                if (i === 0) return marketY(d.value) - 15;
                if (i === 1) return marketY(d.value) - 15;
                if (i === 2) return marketY(d.value) - 15;
                if (i === 3) return marketY(d.value) + 20; // Move below the point
                if (i === 4) return marketY(d.value) - 15;
                return marketY(d.value) - 15;
            })
            .attr("text-anchor", (d, i) => {
                if (i === 0) return "end";
                if (i === 4) return "start";
                return "middle";
            })
            .style("font-size", "10px")
            .text(d => `$${d.value}B`);
        
        // CAGR callout - repositioned to avoid overlap with data points
        marketSvg.append("rect")
            .attr("x", marketMargin.left + 20)
            .attr("y", marketMargin.top)
            .attr("width", 90)
            .attr("height", 25)
            .attr("rx", 5)
            .attr("fill", "rgba(30, 143, 122, 0.1)")
            .attr("stroke", "#1E8F7A")
            .attr("stroke-width", 1);
        
        marketSvg.append("text")
            .attr("x", marketMargin.left + 65)
            .attr("y", marketMargin.top + 16)
            .attr("text-anchor", "middle")
            .attr("class", "cagr")
            .text("CAGR: 30.1%");
        
        // VR/AR icon - using FontAwesome directly
        marketSvg.append("text")
            .attr("x", marketWidth - 60)
            .attr("y", marketMargin.top + 20)
            .attr("text-anchor", "middle")
            .attr("font-family", "FontAwesome")
            .style("font-size", "24px")
            .style("fill", "#0A3D62")
            .text("\uf54b"); // FontAwesome VR headset icon
        
        // Engagement Metrics Chart
        const engagementData = [
            { metric: "Emotional Connection", value: 3.75 },
            { metric: "Engagement", value: 2.3 },
            { metric: "Average VR Headset Price", value: 421.44, trend: "decreasing" }
        ];
        
        const engagementWidth = 420;
        const engagementHeight = 180;
        const engagementMargin = { top: 20, right: 120, bottom: 20, left: 160 };
        
        const engagementSvg = d3.select("#engagement-chart")
            .append("svg")
            .attr("width", engagementWidth)
            .attr("height", engagementHeight);
        
        const engagementY = d3.scaleBand()
            .domain(engagementData.map(d => d.metric))
            .range([engagementMargin.top, engagementHeight - engagementMargin.bottom])
            .padding(0.3);
        
        const maxEngagementValue = 4;
        const engagementX = d3.scaleLinear()
            .domain([0, maxEngagementValue])
            .range([engagementMargin.left, engagementWidth - engagementMargin.right]);
        
        // Bars for first two metrics
        engagementSvg.selectAll(".engagement-bar")
            .data(engagementData.filter(d => d.metric !== "Average VR Headset Price"))
            .enter()
            .append("rect")
            .attr("class", "engagement-bar")
            .attr("x", engagementMargin.left)
            .attr("y", d => engagementY(d.metric))
            .attr("width", d => engagementX(d.value) - engagementMargin.left)
            .attr("height", engagementY.bandwidth())
            .attr("fill", "#1E8F7A");
        
        // Labels
        engagementSvg.selectAll(".engagement-label")
            .data(engagementData)
            .enter()
            .append("text")
            .attr("class", "engagement-label")
            .attr("x", engagementMargin.left - 5)
            .attr("y", d => engagementY(d.metric) + engagementY.bandwidth() / 2 + 4)
            .attr("text-anchor", "end")
            .style("font-size", "12px")
            .text(d => d.metric);
        
        // Multiplier values for first two metrics
        engagementSvg.selectAll(".multiplier-value")
            .data(engagementData.filter(d => d.metric !== "Average VR Headset Price"))
            .enter()
            .append("text")
            .attr("class", "multiplier")
            .attr("x", d => engagementX(d.value) + 10)
            .attr("y", d => engagementY(d.metric) + engagementY.bandwidth() / 2 + 4)
            .text((d, i) => i === 0 ? "3.75× higher" : "2.3× higher");
        
        // Special handling for headset price
        const priceY = engagementY("Average VR Headset Price") + engagementY.bandwidth() / 2;
        
        engagementSvg.append("text")
            .attr("x", engagementMargin.left + 5)
            .attr("y", priceY + 4)
            .attr("class", "key-number")
            .text("$421.44");
        
        engagementSvg.append("text")
            .attr("x", engagementMargin.left + 85)
            .attr("y", priceY + 4)
            .attr("class", "price-trend")
            .text("↓ decreasing trend");
        
        // Barriers Chart
        const barriersData = [
            { barrier: "Infrastructure", score: 3.30, stat: "Eigenvalue 4.12", mitigation: "Network reliability upgrades, Device fleet management" },
            { barrier: "Cost", score: 3.30, stat: "SD 0.741", mitigation: "Phased investments (2-5 VR kits initially), Grant funding" },
            { barrier: "Lack of Experience/Training", score: 3.28, stat: "SD 0.666", mitigation: "Structured training curricula, Micro-credentialing" },
            { barrier: "Content Development Time", score: 3.10, stat: "", mitigation: "Low-code content tools (50% time savings)" }
        ];
        
        const barriersWidth = 450;
        const barriersHeight = 500;
        const barriersMargin = { top: 20, right: 20, bottom: 20, left: 20 };
        
        const barriersSvg = d3.select("#barriers-chart")
            .append("svg")
            .attr("width", barriersWidth)
            .attr("height", barriersHeight);
        
        const barHeight = 50;
        const barGap = 75; // Increased for better spacing
        const barColors = ["#D64541", "#E67E22", "#F39C12", "#F5B041"];
        
        // Barriers bars
        barriersData.forEach((d, i) => {
            const y = barriersMargin.top + i * (barHeight + barGap);
            const barWidth = d.score * 70; // Scale to fit
            
            // Barrier bar
            barriersSvg.append("rect")
                .attr("x", barriersMargin.left)
                .attr("y", y)
                .attr("width", barWidth)
                .attr("height", barHeight)
                .attr("fill", barColors[i])
                .attr("rx", 3);
            
            // Barrier label
            barriersSvg.append("text")
                .attr("class", "barrier-label")
                .attr("x", barriersMargin.left + 10)
                .attr("y", y + 22)
                .attr("fill", "white")
                .text(d.barrier);
            
            // Score - positioned on the right side of the bar
            barriersSvg.append("text")
                .attr("class", "key-number")
                .attr("x", barriersMargin.left + barWidth - 30)
                .attr("y", y + 30)
                .attr("fill", "white")
                .attr("text-anchor", "middle")
                .text(d.score === 3.10 ? "3.1" : "3.3");
            
            // Stats
            if (d.stat) {
                barriersSvg.append("text")
                    .attr("class", "barrier-stats")
                    .attr("x", barriersMargin.left + 10)
                    .attr("y", y + 40)
                    .attr("fill", "rgba(255,255,255,0.8)")
                    .text(d.stat);
            }
            
            // Mitigation strategy
            const mitigationY = y + barHeight + 10;
            
            barriersSvg.append("rect")
                .attr("x", barriersMargin.left)
                .attr("y", mitigationY)
                .attr("width", 410) // Widened to fit text
                .attr("height", 35) // Increased height
                .attr("fill", "rgba(30, 143, 122, 0.1)")
                .attr("stroke", "#1E8F7A")
                .attr("stroke-width", 1)
                .attr("rx", 8);
            
            barriersSvg.append("text")
                .attr("x", barriersMargin.left + 10)
                .attr("y", mitigationY + 20) // Adjusted for better vertical centering
                .attr("fill", "#1E8F7A")
                .style("font-size", "11px")
                .text(d.mitigation);
        });
    </script>
</body>
</html>