<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Layered AI Governance Framework for Healthcare Organizations</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: white;
            color: #333;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        
        .container {
            width: 1100px;
            padding: 20px;
            position: relative;
        }
        
        .title {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .title h1 {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 8px;
            color: #0d4e6d;
        }
        
        .title h2 {
            font-size: 18px;
            font-weight: normal;
            color: #666;
            margin-top: 0;
        }
        
        .pyramid-container {
            position: relative;
            height: 650px;
            margin: 0 auto;
        }
        
        .layer {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 6px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 15px 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
            z-index: 2;
        }
        
        .layer:hover {
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            transform: translateX(-50%) translateY(-2px);
        }
        
        .layer-title {
            font-weight: bold;
            font-size: 22px;
            margin-bottom: 12px;
            color: white;
            text-align: center;
            display: flex;
            align-items: center;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }
        
        .layer-title i {
            margin-right: 10px;
            font-size: 24px;
        }
        
        .layer-components {
            width: 100%;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
        }
        
        .annotation {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.98);
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 12px 15px;
            width: 250px;
            font-size: 14px;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.08);
            z-index: 10;
        }
        
        .source-note {
            text-align: center;
            font-size: 14px;
            color: #666;
            margin-top: 30px;
            font-style: italic;
        }
        
        .component-item {
            padding: 8px 12px;
            background-color: rgba(255, 255, 255, 0.25);
            border-radius: 4px;
            color: white;
            font-weight: 500;
            text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
            font-size: 14px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            text-align: center;
            min-width: 100px;
            max-width: 180px;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 40px;
        }
        
        .connection-line {
            position: absolute;
            background-color: #999;
            z-index: 1;
        }
        
        .horizontal-line {
            height: 2px;
        }
        
        .vertical-line {
            width: 2px;
        }
        
        .dot {
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: #999;
            z-index: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="title">
            <h1>Multi-Layered AI Governance Framework for Healthcare Organizations</h1>
            <h2>Based on Protiviti's 2025 governance model and NIST AI Risk Management Framework</h2>
        </div>
        
        <div class="pyramid-container" id="pyramid"></div>
        
        <div class="source-note">
            Based on Protiviti's 2025 white paper on AI governance in healthcare and NIST AI Risk Management Framework
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const pyramidData = [
                {
                    layer: 5,
                    title: "Regulatory Foundation",
                    icon: "fa-scale-balanced",
                    components: ["FDA AI/ML SaMD guidance", "AMA AI Principles", "HIPAA compliance", "EU AI Act", "State privacy laws"],
                    annotation: "Compliance with evolving regulatory and industry standards",
                    color: "#20c0e8"
                },
                {
                    layer: 4,
                    title: "Technical Safeguards",
                    icon: "fa-gears",
                    components: ["Data governance", "Model validation", "Deployment controls", "Monitoring infrastructure"],
                    annotation: "Technical controls and infrastructure to ensure safe AI deployment",
                    color: "#1ba3c9"
                },
                {
                    layer: 3,
                    title: "Use Case Inventory and Assessment",
                    icon: "fa-clipboard-list",
                    components: ["Continuous inventorying", "Risk assessments", "Performance monitoring", "Compliance documentation"],
                    annotation: "Systematic documentation and evaluation of all AI applications",
                    color: "#1687ab"
                },
                {
                    layer: 2,
                    title: "Enterprise Risk Assessment",
                    icon: "fa-shield-halved",
                    components: ["Data Security", "Bias Mitigation", "Explainability", "Model Integrity", "Clinical Safety"],
                    annotation: "Organization-wide assessment of AI risks across five critical domains",
                    color: "#116a8c"
                },
                {
                    layer: 1,
                    title: "AI Advisory Board",
                    icon: "fa-users-gear",
                    components: ["CMO", "CNO", "Pharmacy Director", "Clinical Informatics", "HIM", "Patient Services"],
                    annotation: "Cross-functional oversight body providing strategic direction for high-risk AI applications",
                    color: "#0d4e6d"
                }
            ];
            
            const container = d3.select("#pyramid");
            const containerWidth = 1100;
            const containerHeight = 650;
            const layerHeight = 90;
            const maxWidth = 850;
            const minWidth = 450;
            const verticalSpacing = 30; // Increased space between layers
            
            // Calculate widths for each layer (bottom layer widest, top layer narrowest)
            pyramidData.forEach((d, i) => {
                // Calculate width based on layer number (layer 5 is widest, layer 1 is narrowest)
                d.width = maxWidth - ((5 - d.layer) * ((maxWidth - minWidth) / 4));
                
                // Calculate vertical position (layer 5 at bottom, layer 1 at top)
                // Higher layer number = lower position in pyramid
                const totalHeight = 5 * layerHeight + 4 * verticalSpacing;
                const startY = (containerHeight - totalHeight) / 2;
                const layerIndex = 5 - d.layer; // Convert to 0-based index from top
                d.top = startY + layerIndex * (layerHeight + verticalSpacing);
            });
            
            // Create layers
            const layers = container.selectAll(".layer")
                .data(pyramidData)
                .enter()
                .append("div")
                .attr("class", "layer")
                .style("width", d => `${d.width}px`)
                .style("height", `${layerHeight}px`)
                .style("top", d => `${d.top}px`)
                .style("background-color", d => d.color);
            
            // Add titles to layers
            layers.append("div")
                .attr("class", "layer-title")
                .html(d => `<i class="fas ${d.icon}"></i> ${d.title}`);
            
            // Add components to layers
            layers.append("div")
                .attr("class", "layer-components")
                .html(d => {
                    return d.components.map(comp => `<div class="component-item">${comp}</div>`).join('');
                });
            
            // Add annotations with proper positioning and connecting lines
            pyramidData.forEach((d, i) => {
                const layerCenterY = d.top + (layerHeight / 2);
                const layerRightX = (containerWidth / 2) + (d.width / 2);
                
                // Position annotation to the right of the layer with proper vertical alignment
                const annotationTop = layerCenterY - 30; // Center annotation vertically with layer
                const annotationLeft = layerRightX + 50; // Position annotation to the right with some space
                
                // Create annotation
                container.append("div")
                    .attr("class", "annotation")
                    .style("top", `${annotationTop}px`)
                    .style("left", `${annotationLeft}px`)
                    .text(d.annotation);
                
                // Create horizontal connection line from layer to vertical line
                container.append("div")
                    .attr("class", "connection-line horizontal-line")
                    .style("top", `${layerCenterY}px`)
                    .style("left", `${layerRightX}px`)
                    .style("width", `30px`); // Horizontal line length
                
                // Create vertical connection line
                container.append("div")
                    .attr("class", "connection-line vertical-line")
                    .style("top", `${layerCenterY}px`)
                    .style("left", `${layerRightX + 30}px`) // Position after horizontal line
                    .style("height", `${annotationTop + 30 - layerCenterY}px`); // Connect to annotation
                
                // Create horizontal line to annotation
                container.append("div")
                    .attr("class", "connection-line horizontal-line")
                    .style("top", `${annotationTop + 30}px`)
                    .style("left", `${layerRightX + 30}px`)
                    .style("width", `${annotationLeft - layerRightX - 30}px`);
                
                // Add dots at connection points for better visibility
                // Dot at layer edge
                container.append("div")
                    .attr("class", "dot")
                    .style("top", `${layerCenterY - 3}px`)
                    .style("left", `${layerRightX - 3}px`);
                
                // Dot at annotation
                container.append("div")
                    .attr("class", "dot")
                    .style("top", `${annotationTop + 30 - 3}px`)
                    .style("left", `${annotationLeft - 3}px`);
            });
        });
    </script>
</body>
</html>