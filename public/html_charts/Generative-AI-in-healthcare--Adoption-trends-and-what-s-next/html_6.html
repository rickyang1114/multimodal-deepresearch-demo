<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generative AI in Healthcare: Market Growth and Productivity Impact Projections</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #ffffff;
            color: #333;
            margin: 0;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 10px;
        }
        
        .title {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .title h1 {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 5px;
            color: #2c3e50;
        }
        
        .chart-container {
            margin-bottom: 30px;
        }
        
        .chart-row {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            height: 340px; /* Increased height for bottom charts */
        }
        
        .chart-box {
            background-color: #ffffff;
            border-radius: 5px;
            padding: 10px;
            width: 32%;
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .subtitle {
            font-size: 16px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 15px;
            color: #2c3e50;
        }
        
        .sources {
            font-size: 12px;
            color: #777;
            margin-top: 20px;
            padding-top: 10px;
            border-top: 1px solid #eee;
        }
        
        .key-number {
            font-family: 'Georgia', serif;
            font-weight: bold;
            color: #1a5276;
        }
        
        .axis line, .axis path {
            stroke: #ccc;
        }
        
        .axis text {
            font-size: 12px;
            fill: #666;
        }
        
        .grid line {
            stroke: #eee;
            stroke-opacity: 0.7;
            shape-rendering: crispEdges;
        }
        
        .cagr-annotation {
            font-size: 14px;
            font-weight: bold;
            fill: #1a5276;
        }
        
        .annotation-box {
            fill: rgba(255, 255, 255, 0.8);
            stroke: #1a5276;
            stroke-width: 1px;
            rx: 5;
            ry: 5;
        }
        
        .legend-rect {
            display: inline-block;
            width: 15px;
            height: 15px;
            margin-right: 5px;
        }
        
        .chart-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="title">
            <h1>Generative AI in Healthcare: Market Growth and Productivity Impact Projections</h1>
        </div>
        
        <div class="chart-container">
            <div class="subtitle">Generative AI in healthcare market size forecast, 2025-2034 (USD billions)</div>
            <div id="market-forecast-chart"></div>
        </div>
        
        <div class="chart-row">
            <div class="chart-box">
                <div class="subtitle">Increase in automatable work hours by 2030</div>
                <div id="automation-chart" class="chart-content"></div>
            </div>
            
            <div class="chart-box">
                <div class="subtitle">Annual US labor productivity growth (percentage points)</div>
                <div id="productivity-chart" class="chart-content"></div>
            </div>
            
            <div class="chart-box">
                <div class="subtitle">Healthcare practitioner time reallocation by 2030</div>
                <div id="time-reallocation-chart" class="chart-content"></div>
            </div>
        </div>
        
        <div class="sources">
            <p>Sources: EIN News, "Generative AI in Healthcare Market Projected to Hit USD 16.82 Billion by 2034"; McKinsey Global Institute, "Generative AI and the future of work in America", July 2023; McKinsey & EIT Health, "Transforming healthcare with AI", March 2020</p>
        </div>
    </div>

    <script>
        // Market Forecast Chart (Top)
        function createMarketForecastChart() {
            const data = [
                { year: 2025, value: 2.7, lower: 2.2, upper: 3.2 },
                { year: 2026, value: 3.3, lower: 2.7, upper: 4.0 },
                { year: 2027, value: 4.0, lower: 3.2, upper: 4.9 },
                { year: 2028, value: 5.0, lower: 3.9, upper: 6.2 },
                { year: 2029, value: 6.1, lower: 4.7, upper: 7.6 },
                { year: 2030, value: 7.5, lower: 5.7, upper: 9.4 },
                { year: 2031, value: 9.2, lower: 6.9, upper: 11.6 },
                { year: 2032, value: 11.3, lower: 8.4, upper: 14.3 },
                { year: 2033, value: 13.8, lower: 10.1, upper: 17.6 },
                { year: 2034, value: 16.8, lower: 12.3, upper: 21.5 }
            ];
            
            const keyYears = [2025, 2027, 2030, 2034];
            
            const margin = { top: 40, right: 60, bottom: 60, left: 70 };
            const width = 1160 - margin.left - margin.right;
            const height = 400 - margin.top - margin.bottom;
            
            const svg = d3.select("#market-forecast-chart")
                .append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);
            
            // Scales
            const x = d3.scaleLinear()
                .domain([2025, 2034])
                .range([0, width]);
                
            const y = d3.scaleLinear()
                .domain([0, 22])
                .range([height, 0]);
            
            // Grid lines
            svg.append("g")
                .attr("class", "grid")
                .attr("transform", `translate(0,${height})`)
                .call(d3.axisBottom(x)
                    .tickSize(-height)
                    .tickFormat("")
                    .ticks(10)
                );
                
            svg.append("g")
                .attr("class", "grid")
                .call(d3.axisLeft(y)
                    .tickSize(-width)
                    .tickFormat("")
                    .ticks(10)
                );
            
            // Axes
            svg.append("g")
                .attr("class", "axis")
                .attr("transform", `translate(0,${height})`)
                .call(d3.axisBottom(x).ticks(10).tickFormat(d3.format("d")));
                
            svg.append("g")
                .attr("class", "axis")
                .call(d3.axisLeft(y).ticks(10));
            
            // X-axis label
            svg.append("text")
                .attr("text-anchor", "middle")
                .attr("x", width / 2)
                .attr("y", height + 40)
                .text("Year")
                .style("font-size", "14px");
                
            // Y-axis label
            svg.append("text")
                .attr("text-anchor", "middle")
                .attr("transform", "rotate(-90)")
                .attr("y", -margin.left + 20)
                .attr("x", -height / 2)
                .text("Market Size (USD Billions)")
                .style("font-size", "14px");
            
            // Confidence interval area
            const area = d3.area()
                .x(d => x(d.year))
                .y0(d => y(d.lower))
                .y1(d => y(d.upper))
                .curve(d3.curveMonotoneX);
                
            svg.append("path")
                .datum(data)
                .attr("fill", "rgba(52, 152, 219, 0.2)")
                .attr("d", area);
            
            // Main line
            const line = d3.line()
                .x(d => x(d.year))
                .y(d => y(d.value))
                .curve(d3.curveMonotoneX);
                
            svg.append("path")
                .datum(data)
                .attr("fill", "none")
                .attr("stroke", "#2980b9")
                .attr("stroke-width", 3)
                .attr("d", line);
            
            // Data points for key years
            svg.selectAll(".data-point")
                .data(data.filter(d => keyYears.includes(d.year)))
                .enter()
                .append("circle")
                .attr("class", "data-point")
                .attr("cx", d => x(d.year))
                .attr("cy", d => y(d.value))
                .attr("r", 6)
                .attr("fill", "#1a5276")
                .attr("stroke", "#fff")
                .attr("stroke-width", 2);
            
            // Data labels for key years - fixed consistent spacing
            svg.selectAll(".data-label")
                .data(data.filter(d => keyYears.includes(d.year)))
                .enter()
                .append("text")
                .attr("class", "data-label")
                .attr("x", d => x(d.year))
                .attr("y", d => y(d.value) - 15) // Consistent spacing for all labels
                .attr("text-anchor", "middle")
                .text(d => `$${d.value}B`)
                .style("font-size", "12px")
                .style("font-weight", "bold")
                .style("fill", "#1a5276");
            
            // CAGR annotation - repositioned for better visibility
            const annotationX = x(2030) - 30; // Shifted slightly left
            const annotationY = y(9); // Adjusted position
            
            // Annotation box
            svg.append("rect")
                .attr("class", "annotation-box")
                .attr("x", annotationX - 50)
                .attr("y", annotationY - 15)
                .attr("width", 100)
                .attr("height", 30);
                
            svg.append("text")
                .attr("class", "cagr-annotation")
                .attr("x", annotationX)
                .attr("y", annotationY + 5)
                .attr("text-anchor", "middle")
                .text("CAGR: 22.52%");
        }
        
        // Automation Chart (Bottom Left)
        function createAutomationChart() {
            const data = [
                { category: "Previous automation potential", value: 21.5 },
                { category: "Additional with generative AI", value: 8.0 }
            ];
            
            const margin = { top: 20, right: 80, bottom: 120, left: 120 }; // Increased right margin
            const width = 350 - margin.left - margin.right;
            const height = 250 - margin.top - margin.bottom;
            
            const svg = d3.select("#automation-chart")
                .append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);
            
            // Scales
            const y = d3.scaleBand()
                .domain(["Automation Potential"])
                .range([0, height])
                .padding(0.3);
                
            const x = d3.scaleLinear()
                .domain([0, 40]) // Further increased domain to provide more space
                .range([0, width]);
            
            // Axes
            svg.append("g")
                .attr("class", "axis")
                .attr("transform", `translate(0,${height})`)
                .call(d3.axisBottom(x).ticks(5).tickFormat(d => d + "%")) // Reduced number of ticks
                .selectAll("text")
                .style("font-size", "12px"); // Increased font size for x-axis labels
            
            // Stacked bars
            const stackedX = 0;
            
            // First segment
            svg.append("rect")
                .attr("x", stackedX)
                .attr("y", y("Automation Potential"))
                .attr("width", x(data[0].value))
                .attr("height", y.bandwidth())
                .attr("fill", "#2980b9");
                
            // Second segment
            svg.append("rect")
                .attr("x", x(data[0].value))
                .attr("y", y("Automation Potential"))
                .attr("width", x(data[1].value))
                .attr("height", y.bandwidth())
                .attr("fill", "#7fb3d5");
            
            // Labels
            svg.append("text")
                .attr("x", -10)
                .attr("y", y("Automation Potential") + y.bandwidth() / 2)
                .attr("text-anchor", "end")
                .attr("dominant-baseline", "middle")
                .text("Healthcare")
                .style("font-size", "14px");
            
            // Total label - repositioned with more space and background for better visibility
            const totalLabelX = x(data[0].value + data[1].value) + 10;
            const totalLabelY = y("Automation Potential") + y.bandwidth() / 2;
            
            // Background for total label
            svg.append("rect")
                .attr("x", totalLabelX - 5)
                .attr("y", totalLabelY - 20)
                .attr("width", 65)
                .attr("height", 40)
                .attr("fill", "white")
                .attr("stroke", "#ccc")
                .attr("stroke-width", 0.5)
                .attr("rx", 3);
                
            svg.append("text")
                .attr("x", totalLabelX)
                .attr("y", totalLabelY - 5)
                .attr("dominant-baseline", "middle")
                .text("Total:")
                .style("font-size", "12px");
                
            svg.append("text")
                .attr("x", totalLabelX)
                .attr("y", totalLabelY + 12)
                .attr("dominant-baseline", "middle")
                .text("29.5%")
                .attr("class", "key-number")
                .style("font-size", "14px");
            
            // Legend with improved spacing and visibility
            const legendData = [
                { label: "Previous automation potential", color: "#2980b9" },
                { label: "Additional with generative AI", color: "#7fb3d5" }
            ];
            
            const legendGroup = svg.append("g")
                .attr("transform", `translate(0, ${height + 30})`);
                
            legendData.forEach((item, i) => {
                const legendRow = legendGroup.append("g")
                    .attr("transform", `translate(0, ${i * 35})`); // Increased spacing
                    
                // Larger color rectangle
                legendRow.append("rect")
                    .attr("width", 24) // Increased size
                    .attr("height", 24) // Increased size
                    .attr("fill", item.color);
                    
                legendRow.append("text")
                    .attr("x", 32) // Adjusted for larger rectangle
                    .attr("y", 16) // Centered with rectangle
                    .text(item.label)
                    .style("font-size", "12px");
            });
        }
        
        // Productivity Chart (Bottom Middle)
        function createProductivityChart() {
            const data = [
                { category: "Historical average", subtitle: "(2000-2019)", value: 1.4 },
                { category: "With generative AI", subtitle: "(midpoint adoption)", value: 0.7 },
                { category: "Full automation", subtitle: "potential", value: 3.5 }
            ];
            
            const margin = { top: 20, right: 30, bottom: 140, left: 50 }; // Increased bottom margin
            const width = 350 - margin.left - margin.right;
            const height = 250 - margin.top - margin.bottom;
            
            const svg = d3.select("#productivity-chart")
                .append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom + 20) // Added extra height
                .append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);
            
            // Scales
            const x = d3.scaleBand()
                .domain(data.map(d => d.category))
                .range([0, width])
                .padding(0.5); // Increased padding for better spacing
                
            const y = d3.scaleLinear()
                .domain([0, 4])
                .range([height, 0]);
            
            // Axes
            svg.append("g")
                .attr("class", "axis")
                .attr("transform", `translate(0,${height})`)
                .call(d3.axisBottom(x))
                .selectAll("text")
                .remove(); // Remove default labels to add our custom ones
                
            svg.append("g")
                .attr("class", "axis")
                .call(d3.axisLeft(y).ticks(5).tickFormat(d => d + "%"));
            
            // Custom x-axis labels with improved formatting and positioning
            data.forEach((d, i) => {
                // Create a group for each label to better control positioning
                const labelGroup = svg.append("g")
                    .attr("transform", `translate(${x(d.category) + x.bandwidth() / 2}, ${height + 15})`);
                
                // Calculate label dimensions based on content
                const labelWidth = d.category === "With generative AI" ? 120 : 100;
                const labelHeight = d.subtitle ? 65 : 35;
                
                labelGroup.append("rect")
                    .attr("x", -labelWidth / 2)
                    .attr("y", 0)
                    .attr("width", labelWidth)
                    .attr("height", labelHeight)
                    .attr("fill", "white")
                    .attr("opacity", 0.7)
                    .attr("rx", 3);
                
                // Main category label - larger and more prominent
                const words = d.category.split(" ");
                if (words.length <= 2) {
                    labelGroup.append("text")
                        .attr("y", 20)
                        .attr("text-anchor", "middle")
                        .text(d.category)
                        .style("font-size", "12px")
                        .style("font-weight", "bold");
                } else {
                    // Split longer text into two lines
                    const firstLine = words.slice(0, 2).join(" ");
                    const secondLine = words.slice(2).join(" ");
                    
                    labelGroup.append("text")
                        .attr("y", 15)
                        .attr("text-anchor", "middle")
                        .text(firstLine)
                        .style("font-size", "12px")
                        .style("font-weight", "bold");
                        
                    labelGroup.append("text")
                        .attr("y", 35)
                        .attr("text-anchor", "middle")
                        .text(secondLine)
                        .style("font-size", "12px")
                        .style("font-weight", "bold");
                }
                
                // Subtitle with better spacing
                if (d.subtitle) {
                    labelGroup.append("text")
                        .attr("y", labelHeight - 15)
                        .attr("text-anchor", "middle")
                        .text(d.subtitle)
                        .style("font-size", "11px")
                        .style("font-style", "italic");
                }
            });
            
            // Bars
            const colors = ["#3498db", "#1abc9c", "#2c3e50"];
            
            svg.selectAll(".bar")
                .data(data)
                .enter()
                .append("rect")
                .attr("class", "bar")
                .attr("x", d => x(d.category))
                .attr("y", d => y(d.value))
                .attr("width", x.bandwidth())
                .attr("height", d => height - y(d.value))
                .attr("fill", (d, i) => colors[i]);
            
            // Data labels - increased spacing from bar tops
            svg.selectAll(".data-label")
                .data(data)
                .enter()
                .append("text")
                .attr("class", "data-label")
                .attr("x", d => x(d.category) + x.bandwidth() / 2)
                .attr("y", d => y(d.value) - 10) // Increased spacing from bar top
                .attr("text-anchor", "middle")
                .text(d => d.value + "%")
                .style("font-size", "12px")
                .style("font-weight", "bold")
                .style("fill", "#1a5276");
        }
        
        // Time Reallocation Chart (Bottom Right)
        function createTimeReallocationChart() {
            const data = [
                { category: "Redirected to patient care", value: 70 },
                { category: "Reduced working hours", value: 30 }
            ];
            
            const width = 350;
            const height = 300; // Increased height
            const radius = Math.min(width, height) / 2 - 80; // Reduced radius to leave more space for labels
            
            const svg = d3.select("#time-reallocation-chart")
                .append("svg")
                .attr("width", width)
                .attr("height", height)
                .append("g")
                .attr("transform", `translate(${width / 2},${height / 2 - 30})`);
            
            // Color scale
            const color = d3.scaleOrdinal()
                .domain(data.map(d => d.category))
                .range(["#2980b9", "#7fb3d5"]);
            
            // Pie chart
            const pie = d3.pie()
                .value(d => d.value)
                .sort(null);
                
            const arc = d3.arc()
                .innerRadius(radius * 0.5) // For donut chart
                .outerRadius(radius);
                
            const arcs = svg.selectAll(".arc")
                .data(pie(data))
                .enter()
                .append("g")
                .attr("class", "arc");
                
            arcs.append("path")
                .attr("d", arc)
                .attr("fill", d => color(d.data.category));
            
            // Center text - improved positioning and spacing with background
            const centerTextGroup = svg.append("g")
                .attr("text-anchor", "middle");
            
            // Background for center text
            centerTextGroup.append("rect")
                .attr("x", -60)
                .attr("y", -30)
                .attr("width", 120)
                .attr("height", 60)
                .attr("fill", "white")
                .attr("opacity", 0.8)
                .attr("rx", 5);
                
            centerTextGroup.append("text")
                .attr("dy", "-1.2em")
                .text("Time freed from")
                .style("font-size", "12px");
                
            centerTextGroup.append("text")
                .attr("dy", "0em")
                .text("administrative tasks:")
                .style("font-size", "12px");
                
            centerTextGroup.append("text")
                .attr("dy", "1.5em")
                .text("15%")
                .attr("class", "key-number")
                .style("font-size", "18px");
            
            // Legend with improved positioning and readability
            const legendGroup = svg.append("g")
                .attr("transform", `translate(${-radius - 20}, ${radius + 20})`); // Adjusted position
                
            // Create a more readable legend with better spacing
            data.forEach((d, i) => {
                const legendRow = legendGroup.append("g")
                    .attr("transform", `translate(0, ${i * 35})`); // Increased spacing
                    
                // Background for legend item
                legendRow.append("rect")
                    .attr("x", -5)
                    .attr("y", -15)
                    .attr("width", width - 100)
                    .attr("height", 30)
                    .attr("fill", "white")
                    .attr("opacity", 0.7)
                    .attr("rx", 3);
                
                legendRow.append("rect")
                    .attr("width", 20)
                    .attr("height", 20)
                    .attr("fill", color(d.category));
                    
                // Add percentage to legend text for clarity
                legendRow.append("text")
                    .attr("x", 28)
                    .attr("y", 14)
                    .style("font-size", "12px")
                    .text(`${d.category}: ${d.value}%`);
            });
        }
        
        // Create all charts
        createMarketForecastChart();
        createAutomationChart();
        createProductivityChart();
        createTimeReallocationChart();
    </script>
</body>
</html>